function china_payments_format_timestamp_for_current_user(e,t=!0){t="undefined"===t||t;let n=new Date(1e3*e),a={year:"numeric",month:"long",day:"numeric"};return!1===t?n.toLocaleDateString(china_payments_get_user_locale(),a):(a.hour="2-digit",a.minute="2-digit",n.toLocaleTimeString(china_payments_get_user_locale(),a))}function china_payments_element_loader(e=""){let t="";return t+='<div class="china-payments-application-loader-wrapper"'+(""!==e?' data-china-payments-loader-type="'+e+'"':"")+">","mini"===e?t+="<div><div></div></div>":""===ChinaPayments.settings.loader_icon?t+="<div><div><div><div><div><div></div></div></div></div></div></div>":(t+='<img alt="loader" src="'+ChinaPayments.settings.loader_icon+'"/>',t+="<div><div><div><div></div></div></div></div>"),t+="</div>"}function china_payments_parse_args(e,t){return"string"==typeof e&&(e=JSON.parse(e)),jQuery.extend(!0,t,e)}function china_payments_css_variable_value(e,t){return getComputedStyle(e[0]).getPropertyValue(t)}function china_payments_get_user_locale(){return navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage||"en"}function china_payments_is_valid_email(e){return e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}function china_payments_redirect(e){window.location=e}function ec_scroll_to(e){(e="string"==typeof e?jQuery(e):e)[0].scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}function china_payments_is_in_viewport(e){e instanceof jQuery&&(e=e[0]);let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function china_payments_in_array(e,t){return-1!==jQuery.inArray(e,t)}function china_payments_clone_object(e){return jQuery.extend(!0,{},e)}function china_payments_clone_array(e){return jQuery.merge([],e)}function china_payments_is_mobile(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function china_payments_is_display_state_visible(e){return void 0===e.attr("data-china-payments-display-state")||"visible"===e.attr("data-china-payments-display-state")}function china_payments_set_display_state_visible(e){e.attr("data-china-payments-display-state","visible")}function china_payments_set_display_state_hidden(e){e.attr("data-china-payments-display-state","hidden")}function china_payments_hashtag_container_from_browser_data_object(e,t){let n=china_payments_hashtag_container_from_browser(e),a="object"!=typeof t||null===t?{}:china_payments_clone_object(t);return n=n.split(";"),jQuery.each(n,(function(e,t){let n=t.split(":");a[n[0]]=decodeURIComponent(n[1])})),a}function china_payments_get_currency_symbol(e,t){let n=(0).toLocaleString(e,{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:0,maximumFractionDigits:0,currencyDisplay:"symbol"}).replace(/\d/g,"").trim();return n.length>1?n[n.length-1]:n}function china_payments_hashtag_container_from_browser(e){if(0===window.location.hash.length)return"";let t=window.location.hash.replace("#","").split("&"),n=(void 0!==e.attr("data-china-payments-hashtag-parent-container")?jQuery(e.attr("data-china-payments-hashtag-parent-container")):e).parents("[data-china-payments-hashtag-identifier]").length;return void 0===t[n]?"":t[n]}function china_payments_hashtag_data_to_string(e){let t="";return jQuery.each(e,(function(e,n){""!==n&&null!=n&&(t+=(""===t?"":";")+e+":"+encodeURIComponent(n))})),t}function china_payments_hashtag_container_sync_to_browser(e,t){e.attr("data-china-payments-hashtag-identifier",china_payments_hashtag_data_to_string(t)),china_payments_hashtag_container_to_browser(e)}function china_payments_hashtag_container_to_browser(e){if(void 0===e.attr("data-china-payments-component"))return;let t=void 0!==e.attr("data-china-payments-hashtag-identifier")?e.attr("data-china-payments-hashtag-identifier"):"";(void 0!==e.attr("data-china-payments-hashtag-parent-container")?jQuery(e.attr("data-china-payments-hashtag-parent-container")):e).parents("[data-china-payments-hashtag-identifier]").each((function(){t=jQuery(this).attr("data-china-payments-hashtag-identifier")+(""===t?"":"&")+t})),window.location.hash==="#"+t||""===window.location.hash&&""===t||ChinaPayments.Hashtag.inTriggerLoop||(window.location.hash=t)}function china_payments_get_cookie(e){const t=`; ${document.cookie}`.split(`; ${e}=`);if(2===t.length)return t.pop().split(";").shift()}function china_payments_set_cookie(e,t,n){let a="";if(n){let e=new Date;e.setTime(e.getTime()+60*n*1e3),a="; expires="+e.toGMTString()}document.cookie=e+"="+t+a+"; path=/"}function china_payments_country_code_to_flag(e){return e.toUpperCase().replace(/./g,e=>String.fromCodePoint(e.charCodeAt(0)+127397))}function china_payments_browser_lang(){return void 0!==typeof navigator.languages?navigator.languages[0]:navigator.language}function china_payments_format_currency(e,t){return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function china_payments_format_percent(e,t,n=null){e=parseFloat(e);let a={style:"percent",minimumFractionDigits:2,maximumFractionDigits:2};return null!==n&&e>=n&&(e=n,a.minimumFractionDigits=0,a.maximumFractionDigits=0),new Intl.NumberFormat(china_payments_browser_lang(),a).format(e/100)}function china_payments_component_configuration_parse(e,t,n=!1){if(void 0!==e.container.attr("data-china-payments-component-args")){let a=JSON.parse(e.container.attr("data-china-payments-component-args"));e.container.removeAttr("data-china-payments-component-args"),__china_payments_component_configuration_parse_set(e,a,t,n)}else void 0!==e.container.attr("data-china-payments-component-action")?ChinaPayments.Request.post(e.container.attr("data-china-payments-component-action"),{},(function(a){"ok"===a.status?(delete a.status,e.container.removeAttr("data-china-payments-component-action"),__china_payments_component_configuration_parse_set(e,a,t,n)):ChinaPayments.setErrorContent(e.container,a)})):"function"==typeof t?t():"string"==typeof t&&e[t]()}function __china_payments_component_configuration_parse_set(e,t,n,a){a?"function"==typeof n?n(t):"string"==typeof n&&e[n](t):(e.configuration=china_payments_parse_args(t,e.configuration),"function"==typeof n?n():"string"==typeof n&&e[n]())}function china_payments_hash_string(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return Math.round(Number.MAX_SAFE_INTEGER*Math.abs(t)/2147483648)}function china_payments_uc_first(e){return e.charAt(0).toUpperCase()+e.slice(1)}function china_payments_trim(e,t){for(;~t.indexOf(e[0]);)e=e.slice(1);for(;~t.indexOf(e[e.length-1]);)e=e.slice(0,-1);return e}String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(e,"g"),t)}),Number.MAX_SAFE_INTEGER||(Number.MAX_SAFE_INTEGER=9007199254740991);let ChinaPayments={Library:{},Component:{},_assets:{requested:[],loaded:[]},_components:{pending:{},instanced:{}},_template_prefix:"china-payments-",settings:{},lang:{},Init:function(e){e.find("[data-china-payments-component]").not("[data-china-payments-component-loaded]").each((function(){ChinaPayments.initComponent(jQuery(this))})),e.find("#china-payments-notification-container .notice-dismiss").on("click",(function(){ChinaPayments.API.post("china-payments/v1/administration/dismiss-notification",!1)}))},initComponent:function(e){let t=e.attr("data-china-payments-component");this.setLoadingContent(e,"","listing-search"===t?"mini":""),void 0!==ChinaPayments.Component[t]?ChinaPayments._instanceComponent(t,e):ChinaPayments._loadComponent(t,e)},getComponentInstance:function(e,t){return t=parseInt(t),ChinaPayments._components.instanced[e][t]},setLoadingContent:function(e,t="",n=""){if(1===e.find(" > .china-payments-application-loader-wrapper").length)return e.find(" > .china-payments-application-loader-status-text").remove(),void(""!==t&&e.prepend('<div class="china-payments-application-loader-status-text">'+t+"</div>"));e.html(china_payments_element_loader(n)),""!==t&&e.prepend('<div class="china-payments-application-loader-status-text">'+t+"</div>")},setNoResultsContent:function(e){e.html('<div data-china-payments-notification="info">'+this.lang.no_results_response+"</div>")},setErrorContent:function(e,t){if(void 0!==t.error_html)return e.html(t.error_html),void ChinaPayments.Init(e);let n=void 0!==t.error_notification?t.error_notification:t.error;e.html('<div data-china-payments-notification="danger">'+n+"</div>")},setCancelledContent:function(e){void 0!==window.closed&&window.closed?e.html(""):e.html('<div data-china-payments-notification="info">'+this.lang.cancelled_request+"</div>")},setFailedAssetFetchContent:function(e){void 0!==window.closed&&window.closed?e.html(""):e.html('<div data-china-payments-notification="danger">'+this.lang.asset_failed_fetch+"</div>")},setHTML:function(e,t){ChinaPayments.Destroy(e),e.html(t),ChinaPayments.Init(e)},_loadComponent:function(e,t=!1){if(void 0===this._components.pending[e])return!1!==t&&(this._components.pending[e]=[t]),this.Resource.loadCSS(this.getComponentAssetPath(e,"style.css"),{"china-payments-component-stylesheet":e}),void this.Resource.loadJS(this.getComponentAssetPath(e,"controller.min.js"),(function(){ChinaPayments._loadedComponent(e)}),(function(){!1!==t&&ChinaPayments.setFailedAssetFetchContent(t)}));!1!==t&&(void 0===this._components.pending[e]&&(this._components.pending[e]=[]),this._components.pending[e][this._components.pending[e].length]=t)},_loadedComponent:function(e){void 0!==this._components.pending[e]&&(0!==this._components.pending[e].length&&jQuery.each(this._components.pending[e],(function(t,n){ChinaPayments._instanceComponent(e,n)})),delete this._components.pending[e])},_instanceComponent:function(e,t){void 0===t.attr("data-china-payments-component-loaded")&&(t.attr("data-china-payments-component-loaded",0),this.setLoadingContent(t),void 0===this._components.instanced[e]&&(this._components.instanced[e]=[]),this._components.instanced[e][this._components.instanced[e].length]=china_payments_clone_object(this.Component[e]),t.attr("data-china-payments-component-instance-index",this._components.instanced[e].length-1),this._components.instanced[e][this._components.instanced[e].length-1].Init(t),t.attr("data-china-payments-component-loaded",1),this.Hashtag.Init())},getComponentAssetPath:function(e,t){if(void 0!==this.settings.component_injection[e]){let n=this.settings.component_injection[e];if("object"==typeof n){let e=Object.keys(n),a=!1;return jQuery.each(e,(function(e,n){return 0!==t.indexOf(n)||(a=n,!1)})),!1!==a?n[a]+"/"+t.replace(a,""):n.__default+"/"+t}return this.settings.component_injection[e]+"/"+t}return this.settings.library_url+"component/"+e+"/"+t},LoadAssets:function(e,t=!1,n=!0){if("string"==typeof e)return china_payments_in_array(e,ChinaPayments._assets.loaded)?void("function"==typeof t&&t()):china_payments_in_array(e,ChinaPayments._assets.requested)?void setTimeout((function(){ChinaPayments.LoadAssets(e,t,n)}),100):(ChinaPayments._assets.requested[ChinaPayments._assets.requested.length]=e,e.endsWith(".css")?(ChinaPayments.Resource.loadCSS(e),void("function"==typeof t&&t())):void ChinaPayments.Resource.loadJS(e,t,!1,n));let a=_.head(e);if(1===e.length)return void this.LoadAssets(a,t);let o=this,i=_.drop(e,1);this.LoadAssets(a,(function(){o.LoadAssets(i,t)}))},isAssetLoaded:function(e){if(void 0===this._assets.loaded)return!1;if(e instanceof Array){let t=!0;return jQuery.each(e,(function(e,n){ChinaPayments._assets.loaded.includes(n)||(t=!1)})),t}return this._assets.loaded.includes(e)},Destroy:function(e){void 0!==e.attr("data-china-payments-component")&&ChinaPayments.__destroyComponent(e),"undefined"!=typeof tinyMCE&&(tinyMCE.triggerSave(),e.find(".wp-editor-area").each((function(){"undefined"!==jQuery(this).attr("id")&&tinyMCE.execCommand("mceRemoveEditor",!1,jQuery(this).attr("id"))}))),e.find("[data-china-payments-component]").each((function(){ChinaPayments.__destroyComponent(jQuery(this))})),e.find("[data-china-payments-library]").each((function(){let e=jQuery(this).attr("data-china-payments-library");e=china_payments_uc_first(e),void 0!==ChinaPayments.Library[e]&&ChinaPayments.Library[e].Destroy(jQuery(this))})),e.find("*").off(),e.html("")},__destroyComponent:function(e){let t=e.attr("data-china-payments-component"),n=e.attr("data-china-payments-component-instance-index"),a=void 0!==ChinaPayments._components.instanced[t]&&void 0!==ChinaPayments._components.instanced[t][n];a&&"function"==typeof ChinaPayments._components.instanced[t][n].__onDestroy&&ChinaPayments._components.instanced[t][n].__onDestroy(),e.removeAttr("data-china-payments-component"),e.removeAttr("data-china-payments-component-loaded"),e.removeAttr("data-china-payments-component-instance-index"),a&&ChinaPayments._components.instanced[t].splice(n,1)},RemoveHTMLNode:function(e){this.Destroy(e),e.remove()}};function _china_payments_init_application(e,t){ChinaPayments.lang=e,ChinaPayments.settings=china_payments_parse_args(t,ChinaPayments.settings),ChinaPayments.Init(jQuery("body")),jQuery(window).trigger("china_payments_ready")}jQuery(document).ready((function(){jQuery.extend(jQuery.expr[":"],{containsCaseInsensitive:function(e,t,n,a){return(e.textContent||e.innerText||"").toLowerCase().indexOf((n[3]||"").toLowerCase())>=0}}),_china_payments_init_application(window.china_payments_data.lang,window.china_payments_data.configuration)})),ChinaPayments.Library.Popup={_default_args:{type:"default",allow_close:!0,allow_overlay_close:!0,trigger_app_init:!1},display:function(e,t){t=void 0===t?this._default_args:china_payments_parse_args(t,this._default_args),0!==jQuery("#china-payments-popup-overlay").length&&this.close(),jQuery("body").append('<div style="display:none;" id="china-payments-popup-overlay"><div id="china-payments-popup-wrapper" class="china-payments-interaction-overflow-container"><div id="china-payments-popup"></div>'+(t.allow_close?'<span class="china-payments-popup-close-icon" data-china-payments-popup-trigger="close"><svg data-ec-type="fill" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.8323 12.0001L21.6199 4.21215C22.1267 3.70557 22.1267 2.88651 21.6199 2.37993C21.1133 1.87336 20.2943 1.87336 19.7877 2.37993L11.9999 10.1679L4.21228 2.37993C3.70548 1.87336 2.88667 1.87336 2.3801 2.37993C1.8733 2.88651 1.8733 3.70557 2.3801 4.21215L10.1677 12.0001L2.3801 19.7881C1.8733 20.2947 1.8733 21.1138 2.3801 21.6204C2.63256 21.8731 2.96449 22 3.29619 22C3.62789 22 3.95959 21.8731 4.21228 21.6204L11.9999 13.8324L19.7877 21.6204C20.0404 21.8731 20.3721 22 20.7038 22C21.0355 22 21.3672 21.8731 21.6199 21.6204C22.1267 21.1138 22.1267 20.2947 21.6199 19.7881L13.8323 12.0001Z"/></svg></span>':"")+"</div></div>");let n=this;jQuery("html, body").addClass("china-payments-popup-visible"),jQuery("#china-payments-popup-overlay").attr("data-china-payments-type",t.type),this.getContainerObject().html(e),t.trigger_app_init&&ChinaPayments.Init(this.getContainerObject()),jQuery("#china-payments-popup-overlay").show().off("click"),jQuery(document).off("keyup.china_payments_popup"),t.allow_close&&jQuery('#china-payments-popup-overlay [data-china-payments-popup-trigger="close"]').on("click",(function(){n.close()})),t.allow_overlay_close&&jQuery("#china-payments-popup-overlay").on("click",(function(e){void 0!==jQuery(e.target).attr("id")&&"china-payments-popup-overlay"===jQuery(e.target).attr("id")&&n.close()})),t.allow_close&&jQuery(document).on("keyup.china_payments_popup",(function(e){"Escape"===e.key&&n.close()}))},getContainerObject:function(){return jQuery("#china-payments-popup")},close:function(){ChinaPayments.Destroy(this.getContainerObject()),jQuery(document).off("keyup.china_payments_popup"),jQuery("#china-payments-popup-overlay").off("click").remove(),jQuery("html, body").removeClass("china-payments-popup-visible")}},ChinaPayments.API={post:function(e,t,n){return this.__request(e,"POST",t,n)},fetch:function(e,t,n){return this.__request(e,"GET",t,n)},__request:function(e,t,n,a){return jQuery.ajax({url:ChinaPayments.settings.rest_url+e,method:t,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",ChinaPayments.settings.rest_nonce)},data:n}).done((function(e,t,n){a(e)})).fail((function(e){a(e.responseJSON)}))}},ChinaPayments.Hashtag={_registeredEvent:!1,inTriggerLoop:!1,Init:function(){this._registeredEvent||(jQuery(window).on("hashchange",(function(){ChinaPayments.Hashtag._eventTriggered()})),this._registeredEvent=!0)},_eventTriggered:function(){let e=!0;this.inTriggerLoop=!0,jQuery.each(ChinaPayments._components.instanced,(function(t,n){return jQuery.each(n,(function(t,n){if("function"==typeof n.__onWindowHashChangeGlobal)return n.__onWindowHashChangeGlobal(),e;if("function"!=typeof n.__onWindowHashChange||void 0===n.container.attr("data-china-payments-hashtag-identifier")||void 0===n.container)return e;let a=china_payments_hashtag_container_from_browser(n.container);return a===n.container.attr("data-china-payments-hashtag-identifier")?e:(n.__onWindowHashChange(a),e=!1)})),e})),this.inTriggerLoop=!1}},ChinaPayments.Resource={loadCSS:function(e,t){let n="object"==typeof t?t:{};n.rel="stylesheet",n.type="text/css",n.href=e+"?version="+ChinaPayments.settings.file_version,jQuery("<link/>",n).appendTo("head"),ChinaPayments._assets.loaded[ChinaPayments._assets.loaded.length]=e},loadJS:function(e,t,n,a=!0){let o=jQuery.ajax({type:"GET",url:e+(a?"?version="+ChinaPayments.settings.file_version:""),success:function(){ChinaPayments._assets.loaded[ChinaPayments._assets.loaded.length]=e,"function"==typeof t&&t()},dataType:"script",cache:!0});"function"==typeof n&&o.fail(n)},getTemplateFile:function(e,t){jQuery.ajax({type:"GET",url:e+"?version="+ChinaPayments.settings.file_version,success:t,dataType:"html",cache:!0})}},ChinaPayments.Template={_getIdentifier:function(e,t){return t=e+"/"+t,ChinaPayments._template_prefix+t.replaceAll("/template","").replaceAll("/","-").replace(".html","")},isLoaded:function(e,t){if("string"==typeof t)return jQuery("#tmpl-"+this._getIdentifier(e,t)).length>0;let n=this,a=!0;return jQuery.each(t,(function(t,o){if(0===jQuery("#tmpl-"+n._getIdentifier(e,o)).length)return a=!1,!1})),a},preload:function(e,t,n){if("string"==typeof t){if(this.isLoaded(e,t))return void("function"==typeof n&&n());let a=this;return void ChinaPayments.Resource.getTemplateFile(ChinaPayments.getComponentAssetPath(e,t),(function(o){jQuery("body").append('<script type="text/template" id="tmpl-'+a._getIdentifier(e,t)+'">'+o+"<\/script>"),"function"==typeof n&&n()}))}let a=_.head(t);if(1===t.length)return void this.preload(e,a,n);let o=this,i=_.drop(t,1);this.preload(e,a,(function(){o.preload(e,i,n)}))},get:function(e,t,n={},a=""){"object"!=typeof n&&(n={});let o=this._getIdentifier(e,t);if(jQuery("#tmpl-"+o).length>0){let e=wp.template(o);if(void 0===a||""===a)return e(n);jQuery("body").append('<div id="tmpl-find-'+o+'" style="display:none;">'+e(n)+"</div>");let t=jQuery("#tmpl-find-"+o),i=t.find(a).html();return t.remove(),i}return!1},load:function(e,t,n,a={},o=!1,i="set"){"object"!=typeof a&&(a={});let r=this;this.preload(t,n,(function(){"append"===i?e.append(r.get(t,n,a)):"prepend"===i?e.prepend(r.get(t,n,a)):e.html(r.get(t,n,a)),ChinaPayments.Init(e),void 0!==ChinaPayments.settings.template_extra[t+"/"+n]&&jQuery.each(ChinaPayments.settings.template_extra[t+"/"+n],(function(t,n){ChinaPayments.LoadAssets(n.file,(function(){"function"==typeof window[n.callback]&&window[n.callback](e,a)}))})),"function"==typeof o&&o()}))}};